<!DOCTYPE html>
<html lang="zh-ch">
<head>
  
    <title>Github Actions 简介 :: 火龙果的博客 — 分享学到的知识</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="description" content="在开发 Apache SkyWalking CLI 时，使用到了GitHub Actions，GitHub Actions可以灵活地构建自动化的软件开发工作流。可以编写单个任务，并将其"/>
<meta name="keywords" content="github, github actions, ci, cd, 持续集成, 持续部署"/>
<meta name="robots" content="noodp"/>
<link rel="canonical" href="https://yanlong.me/post/github-actions/" />


<link rel="stylesheet" href="https://yanlong.me/assets/style.css">

  <link rel="stylesheet" href="https://yanlong.me/assets/blue.css">






<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://yanlong.me/img/apple-touch-icon-144-precomposed.png">

<link rel="shortcut icon" href="https://yanlong.me/img/favicon/blue.png">



<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Github Actions 简介 :: 火龙果的博客 — 分享学到的知识" />
<meta name="twitter:description" content="在开发 Apache SkyWalking CLI 时，使用到了GitHub Actions，GitHub Actions可以灵活地构建自动化的软件开发工作流。可以编写单个任务，并将其" />
<meta name="twitter:site" content="https://yanlong.me/" />
<meta name="twitter:creator" content="" />
<meta name="twitter:image" content="https://yanlong.me/images/github-actions/actions.png">


<meta property="og:locale" content="zh-ch" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Github Actions 简介 :: 火龙果的博客 — 分享学到的知识">
<meta property="og:description" content="在开发 Apache SkyWalking CLI 时，使用到了GitHub Actions，GitHub Actions可以灵活地构建自动化的软件开发工作流。可以编写单个任务，并将其" />
<meta property="og:url" content="https://yanlong.me/post/github-actions/" />
<meta property="og:site_name" content="Github Actions 简介" />
<meta property="og:image" content="https://yanlong.me/images/github-actions/actions.png">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2019-11-07 11:46:04 &#43;0800 CST" />









<link rel="stylesheet" href="/assets/github.min.css">
<script src="/assets/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script data-ad-client="ca-pub-4136853851848129" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-124887845-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-124887845-1');
</script>


</head>
<body class="">


<div class="container center">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="https://yanlong.me/">
  <div class="logo">
    火龙果的博客
  </div>
</a>

    </div>
    <div class="menu-trigger">menu</div>
  </div>
  
</header>


  <div class="content">
    
<div class="post">
  <h1 class="post-title">
    <a href="https://yanlong.me/post/github-actions/">Github Actions 简介</a></h1>
  <div class="post-meta">
      
    <span class="post-date">
      2019-11-07
    </span>
    
    
  </div>

  
  <span class="post-tags">
    
    #<a href="https://yanlong.me/tags/github/">github</a>&nbsp;
    
  </span>
  

  
  <img src="https://yanlong.me/images/github-actions/actions.png" class="post-cover" />
  

  <div class="post-content">
    

<p>在开发 <a href="https://github.com/apache/skywalking-cli">Apache SkyWalking CLI</a> 时，使用到了GitHub Actions，GitHub Actions可以灵活地构建自动化的软件开发工作流。可以编写单个任务，并将其组合以创建自定义工作流程。工作流是自定义的自动化流程，可以在存储库中对其进行设置，以在GitHub上构建，测试，打包，发布或部署任何代码项目。</p>

<p>借助GitHub Actions，可以直接在存储库中构建端到端的持续集成（CI）和持续部署（CD）功能。GitHub Actions支持GitHub的内置连续集成服务。</p>

<p>工作流在Linux，macOS，Windows和GitHub托管服务器上的容器中运行。</p>

<h2 id="使用限制">使用限制</h2>

<ol>
<li>每个存储库最多可以同时执行20个工作流。</li>
<li>每小时可以在一个存储库中的所有操作中执行多达1000个API请求。</li>
<li>工作流程中的每个job最多可以运行6个小时的执行时间。</li>
</ol>

<h2 id="语法预览">语法预览</h2>

<ol>
<li><code>name</code></li>
<li><code>on</code></li>
<li><code>on.&lt;event_name&gt;.types</code></li>
<li><code>on.&lt;push|pull_request&gt;.&lt;branches|tags&gt;</code></li>
<li><code>on.&lt;push|pull_request&gt;.&lt;paths&gt;</code></li>
<li><code>on.schedule</code></li>
<li><code>env</code></li>
<li><code>jobs</code></li>
<li><code>jobs.&lt;job_id&gt;</code></li>
<li><code>jobs.&lt;job_id&gt;.if</code></li>
<li><code>jobs.&lt;job_id&gt;.env</code></li>
<li><code>jobs.&lt;job_id&gt;.name</code></li>
<li><code>jobs.&lt;job_id&gt;.needs</code></li>
<li><code>jobs.&lt;job_id&gt;.runs-on</code></li>
<li><code>jobs.&lt;job_id&gt;.steps</code></li>
<li><code>jobs.&lt;job_id&gt;.timeout-minutes</code></li>
<li><code>jobs.&lt;job_id&gt;.strategy</code></li>
<li><code>jobs.&lt;job_id&gt;.container</code></li>
<li><code>jobs.&lt;job_id&gt;.services</code></li>
</ol>

<p><code>name</code>
工作流程的名称。</p>

<p><code>on</code> string or array</p>

<p>定义监听的事件类型</p>

<p>如：在push时触发</p>

<pre><code class="language-yml">on: push
</code></pre>

<p>如果需要多个，则写成数组模式</p>

<pre><code class="language-yml">on: [push, pull_request]
</code></pre>

<p><code>on.&lt;event_name&gt;.types</code></p>

<p>定义触发工作流程的事件类型。</p>

<p>如：</p>

<pre><code class="language-yml">on:
  release:
    types: [published, created]
</code></pre>

<p><code>on.&lt;push|pull_request&gt;.&lt;branches|tags&gt;</code></p>

<p>使用push和pull_request事件时，可以将工作流配置为在特定分支或标签上运行。如果仅定义tags或仅定义branches，则工作流将不会运行影响未定义的Git引用的事件。</p>

<pre><code class="language-yml">on:
  push:
    branches:
      - master
      - 'releases/**'
  tags:
    - v1
    - v1.*
</code></pre>

<p>排除模式</p>

<pre><code class="language-yml">on:
  push:
    branches-ignore:
      - master
      - 'releases/**'
  tags-ignore:
    - v1
    - v1.*
</code></pre>

<p><code>on.&lt;push|pull_request&gt;.paths</code></p>

<p>使用push和pull_request事件时，可以将工作流配置为在至少一个文件不匹配paths-ignore或至少一个修改的文件与已配置匹配时运行。</p>

<pre><code class="language-yml">on:
  push:
    paths-ignore:
    - 'docs/**'
</code></pre>

<p><code>on.schedule</code></p>

<p>可以使用POSIX cron语法安排工作流在特定UTC时间运行。</p>

<pre><code class="language-yml">on:
  schedule:
    - cron:  '*/15 * * * *'
</code></pre>

<p><code>env</code></p>

<p>可用于工作流程中所有作业和步骤的环境变量</p>

<p><code>jobs</code></p>

<p>工作流程运行由一个或多个作业组成。默认情况下，作业并行运行。</p>

<p><code>jobs.&lt;job_id&gt;</code></p>

<p>每个job都可以设置一个id。</p>

<pre><code class="language-yml">jobs:
  first_job:
    name: first job
</code></pre>

<p><code>jobs.&lt;job_id&gt;.name</code></p>

<p>给job起个名字。</p>

<p><code>jobs.&lt;job_id&gt;.needs</code></p>

<p>设置job依赖，比如job2依赖job1</p>

<pre><code class="language-yml">jobs:
  job1:
  job2:
    needs: job1
</code></pre>

<p><code>jobs.&lt;job_id&gt;.runs-on</code></p>

<p>运行job所需的操作系统</p>

<pre><code class="language-yml">runs-on: ubuntu-latest
runs-on: [ubuntu-latest, windows-latest]
</code></pre>

<p><code>jobs.&lt;job_id&gt;.steps</code></p>

<p>一个job包含一系列steps，steps可以运行命令。</p>

<pre><code class="language-yml">name: Greeting from Mona

on: push

jobs:
  my-job:
    name: My Job
    runs-on: ubuntu-latest
    steps:
    - name: Print a greeting
      env:
        MY_VAR: Hi there! My name is
        FIRST_NAME: Mona
        MIDDLE_NAME: The
        LAST_NAME: Octocat
      run: |
        echo $MY_VAR $FIRST_NAME $MIDDLE_NAME $LAST_NAME.
</code></pre>

<p><code>jobs.&lt;job_id&gt;.timeout-minutes</code></p>

<p>在GitHub自动取消工作流之前，允许工作流运行的最大分钟数。默认值：360</p>

<p><code>jobs.&lt;job_id&gt;.strategy</code></p>

<p>创建一个策略，在不同的操作系统下运行任务，例如在两个不同的操作系统上运行3个node版本</p>

<pre><code class="language-yml">runs-on: ${{ matrix.os }}
strategy:
  matrix:
    os: [ubuntu-16.04, ubuntu-18.04]
    node: [6, 8, 10]
steps:
  - uses: actions/setup-node@v1
    with:
      node-version: ${{ matrix.node }}
</code></pre>

<p><code>jobs.&lt;job_id&gt;.container</code></p>

<p>指定任务运行容器</p>

<pre><code class="language-yml">jobs:
  my_job:
    container:
      image: node:10.16-jessie
      env:
        NODE_ENV: development
      ports:
        - 80
      volumes:
        - my_docker_volume:/volume_mount
      options: --cpus 1
</code></pre>

<p><code>jobs.&lt;job_id&gt;.services</code></p>

<p>job依赖的其他服务，如mysql，redis</p>

<pre><code class="language-yml">services:
  nginx:
    image: nginx
    ports:
      - 8080:80
    env:
      NGINX_PORT: 80
  redis:
    image: redis
    ports:
      - 6379/tcp
</code></pre>

<p>到此,一些 GitHub actions 常用配置参数已经熟悉完了，每个命令还有一些子命令，可以参考GitHub官方文档。</p>

  </div>
  <img src="/images/qrcode.png" width="300px" style="margin: 0 auto">
  
  <div class="pagination">
    <div class="pagination__title">
      <span
        class="pagination__title-h"></span>
      <hr />
    </div>
    <div class="pagination__buttons">
      
      
      <span class="button next">
        <a href="https://yanlong.me/post/golang-encrypt-io-copy/">
          <span class="button__text">Golang Encrypt Io Copy</span>
          <span class="button__icon">→</span>
        </a>
      </span>
      
    </div>
  </div>
  
  

</div>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright copyright--user">
        <span>© 2019 Powered by <a href="https://yanlong.me">yanlong.me</a></span>
    
        <span>:: Theme made by panr</span>
      </div>
  </div>
  <div class="footer__inner">
      <div class="copyright copyright--user">
        <span class="theme-info">
          <a class="theme-link" href="https://yuerblog.cc/" target="_blank">鱼儿的博客</a>
          <span class="division">|</span>
          <a class="theme-link" href="http://www.is17.com/" target="_blank">依十七</a>
          <span class="division">|</span>
          <a class="theme-link" href="https://zzrdark.github.io/" target="_blank">zzrdark的技术专栏</a>
          <span class="division">|</span>
          <a class="theme-link" href="https://wujunze.com" target="_blank">吴钧泽博客</a>
        </span>
      </div>
  </div>
</footer>

<script src="https://yanlong.me/assets/main.js"></script>





  
</div>

</body>
</html>
